<!-- Define a form in which you will ask your customer to input their password -->
<form onSubmit="onSubmit(); return false;">
  Username: <input type="input" name="u" /><br/>
  Password: <div id="password"></div><br/>
  <input type="submit" value="Login" />
</form>
<script>
  // let head_ref = document.getElementsByTagName('head')[0];
  // let new_src = document.createElement('script');
  // new_src.src = "https://build.weavr.io/app/secure/static/client.1.js";
  // new_src.onload = function(){
  //   window.alert('Script is loaded');
  //   window.alert('Script is loaded');
  //   window.OpcUxSecureClient.init('HOMwh0cqahsBedJJehsADQ==');

  //   var form = window.OpcUxSecureClient.form();
  // }
  // head_ref.appendChild(new_src);
</script>
<script src="https://build.weavr.io/app/secure/static/client.1.js"></script>
<script type="text/javascript">
  // Initialise the UI library using your ui_key. Replace {{ui_key}} with your own UI key.
  window.OpcUxSecureClient.init('HOMwh0cqahsBedJJehsADQ==');

  // Create an instance of a secure form
  var form = window.OpcUxSecureClient.form();
  
  // Create an instance of a secure Password component that will collect the password
  var input = form.input(
    'p', 
    'password', 
    {
      placeholder: 'Password', 
      maxlength: 20,
      value : 'fgkjfdkjf'
    }
  );

  // Embed the secure Password component in the HTML element where you want
  // the Password component to the shown on screen
  input.mount(document.getElementById('password'));

  // Define a function that will be executed when the form is submitted by the user
  function onSubmit() {
      // Get the tokenised version of the password inputted by your customer
      form.tokenize(function(tokens) {
          console.log(tokens.p);
      });
  }
</script>
